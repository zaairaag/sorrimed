<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SorriaMed | Fluxo do Agente Eva - MVP v0.1</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        orbi: { bg: '#0f172a', card: '#1e293b', accent: '#DC0073', success: '#10b981', warning: '#f59e0b', text: '#f8fafc', textSec: '#94a3b8' }
                    },
                    fontFamily: { sans: ['Inter', 'sans-serif'], display: ['Montserrat', 'sans-serif'] }
                }
            }
        }
    </script>
    <style>
        body { background-color: #0f172a; color: #f8fafc; }
        .bg-grid { background-image: radial-gradient(#334155 1px, transparent 1px); background-size: 20px 20px; }
        .mermaid { min-width: 100%; }
        .mermaid svg { min-width: 1000px !important; }
        .section-card { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border: 1px solid #334155; }
        .section-card:hover { border-color: #DC0073; }
        .tab-active { background: linear-gradient(135deg, #DC0073 0%, #9d174d 100%); }
        .diagram-container { overflow: auto; cursor: grab; }
        .diagram-container:active { cursor: grabbing; }
        .diagram-wrapper { transform-origin: top left; transition: transform 0.2s ease; }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
    </style>
</head>
<body class="min-h-screen font-sans">

    <!-- Header -->
    <header class="bg-orbi-card/80 backdrop-blur-md border-b border-white/10 sticky top-0 z-50">
        <div class="max-w-[1800px] mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-orbi-accent to-pink-600 flex items-center justify-center font-display font-bold text-2xl shadow-lg shadow-orbi-accent/30">S</div>
                <div>
                    <h1 class="font-display font-bold text-xl">Agente Eva - SorriaMed</h1>
                    <p class="text-sm text-orbi-textSec">MVP v0.1 | Fluxo Completo Interativo</p>
                </div>
            </div>
            <div class="flex items-center gap-3">
                <button onclick="switchTab('principal')" id="tab-principal" class="tab-active px-5 py-2.5 rounded-full text-sm font-semibold transition-all">Fluxo Principal</button>
                <button onclick="switchTab('integracoes')" id="tab-integracoes" class="px-5 py-2.5 rounded-full text-sm font-semibold bg-orbi-card hover:bg-white/10 transition-all">Integracoes</button>
                <button onclick="switchTab('pendencias')" id="tab-pendencias" class="px-5 py-2.5 rounded-full text-sm font-semibold bg-orbi-card hover:bg-white/10 transition-all flex items-center gap-2">
                    Pendencias <span class="bg-orbi-warning text-black text-xs px-2 py-0.5 rounded-full font-bold">16</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Legend -->
    <div class="bg-orbi-card/50 border-b border-white/5 py-3">
        <div class="max-w-[1800px] mx-auto px-6 flex flex-wrap items-center justify-center gap-6 text-xs font-medium uppercase tracking-wider text-orbi-textSec">
            <div class="flex items-center gap-2"><div class="w-4 h-4 rounded bg-emerald-500"></div> DEFINIDO</div>
            <div class="flex items-center gap-2"><div class="w-4 h-4 rounded bg-amber-500"></div> PENDENTE VALIDAR</div>
            <div class="flex items-center gap-2"><div class="w-4 h-4 rounded bg-rose-500"></div> SEGURANCA/CLINICO</div>
            <div class="flex items-center gap-2"><div class="w-4 h-4 rounded bg-violet-500"></div> HANDOFF HUMANO</div>
            <div class="flex items-center gap-2 ml-6 pl-6 border-l border-white/20">
                <span>Zoom:</span>
                <button onclick="zoomOut()" class="w-7 h-7 rounded bg-orbi-card hover:bg-orbi-accent flex items-center justify-center font-bold">-</button>
                <span id="zoom-level" class="w-12 text-center">100%</span>
                <button onclick="zoomIn()" class="w-7 h-7 rounded bg-orbi-card hover:bg-orbi-accent flex items-center justify-center font-bold">+</button>
                <button onclick="resetZoom()" class="px-3 h-7 rounded bg-orbi-card hover:bg-orbi-accent text-xs">Reset</button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="bg-grid min-h-[calc(100vh-140px)]">

        <!-- TAB: Fluxo Principal -->
        <div id="view-principal" class="p-6">
            <div class="max-w-[1800px] mx-auto">
                <div class="mb-6 text-center">
                    <h2 class="font-display text-2xl font-bold mb-2">1 - Fluxo Principal - Experiencia do Paciente no WhatsApp</h2>
                    <p class="text-orbi-textSec">Do primeiro oi ate o agendamento confirmado</p>
                </div>
                <div class="section-card rounded-2xl p-6 diagram-container" style="max-height: 80vh;">
                    <div class="diagram-wrapper" id="wrapper-principal">
                        <pre class="mermaid">
flowchart TD
    subgraph ENTRADA [ENTRADA DO PACIENTE]
        A[Paciente chama no WhatsApp]
        B[Eva responde em 15s - DEFINIDO]
    end

    subgraph METODO [METODO SORRIAMED]
        C[Explica 1o passo obrigatorio - DEFINIDO]
        D{Paciente esta com dor ou desconforto?}
    end

    subgraph URGENCIA [ROTA DE URGENCIA]
        E[Interrompe fluxo de agendamento]
        F[Encaminha IMEDIATO - 21 99773-3041]
        F2[Horario: Seg-Sex 8h-18h]
        G[FIM - Atendimento Clinico]
    end

    subgraph COLETA [COLETA DE DADOS]
        H[Coleta Nome Completo - DEFINIDO]
        I[Apresenta 5 Unidades - PENDENTE]
    end

    subgraph AGENDAMENTO [AGENDAMENTO]
        J[Oferece ate 3 horarios - DEFINIDO]
        K{Paciente escolhe uma opcao?}
        L[Agenda no Clinicorp - DEFINIDO]
        M[Envia confirmacao - DEFINIDO]
    end

    subgraph POSAGENDAMENTO [POS-AGENDAMENTO]
        N[Envia Google Reviews - PENDENTE]
        O[Envia Como Chegar - PENDENTE]
        P[Atualiza CRM Clinia - PENDENTE]
        Q[FIM - Agendamento Completo]
    end

    subgraph FOLLOWUP [FOLLOW-UP]
        R[Envia FUP - PENDENTE]
        S{3 msgs visualizadas sem resposta?}
        T[Encerramento elegante - DEFINIDO]
        U[FIM - Sem Resposta]
    end

    A --> B
    B --> C
    C --> D
    
    D -->|SIM - DOR| E
    E --> F
    F --> F2
    F2 --> G
    
    D -->|NAO| H
    H --> I
    I --> J
    J --> K
    
    K -->|SIM| L
    L --> M
    M --> N
    N --> O
    O --> P
    P --> Q
    
    K -->|NAO ou Silencio| R
    R --> S
    S -->|SIM| T
    T --> U
    S -->|NAO| R

    style A fill:#1e293b,stroke:#10b981,stroke-width:2px,color:#fff
    style B fill:#1e293b,stroke:#10b981,stroke-width:2px,color:#fff
    style C fill:#1e293b,stroke:#10b981,stroke-width:2px,color:#fff
    style D fill:#0f172a,stroke:#DC0073,stroke-width:3px,color:#fff
    style E fill:#1e293b,stroke:#ef4444,stroke-width:2px,color:#fff
    style F fill:#1e293b,stroke:#ef4444,stroke-width:2px,color:#fff
    style F2 fill:#1e293b,stroke:#ef4444,stroke-width:2px,color:#fff
    style G fill:#ef4444,stroke:#ef4444,stroke-width:2px,color:#fff
    style H fill:#1e293b,stroke:#10b981,stroke-width:2px,color:#fff
    style I fill:#1e293b,stroke:#f59e0b,stroke-width:3px,color:#fff
    style J fill:#1e293b,stroke:#10b981,stroke-width:2px,color:#fff
    style K fill:#0f172a,stroke:#DC0073,stroke-width:3px,color:#fff
    style L fill:#1e293b,stroke:#10b981,stroke-width:2px,color:#fff
    style M fill:#1e293b,stroke:#10b981,stroke-width:2px,color:#fff
    style N fill:#1e293b,stroke:#f59e0b,stroke-width:3px,color:#fff
    style O fill:#1e293b,stroke:#f59e0b,stroke-width:3px,color:#fff
    style P fill:#1e293b,stroke:#f59e0b,stroke-width:3px,color:#fff
    style Q fill:#10b981,stroke:#10b981,stroke-width:2px,color:#fff
    style R fill:#1e293b,stroke:#f59e0b,stroke-width:3px,color:#fff
    style S fill:#0f172a,stroke:#DC0073,stroke-width:3px,color:#fff
    style T fill:#1e293b,stroke:#10b981,stroke-width:2px,color:#fff
    style U fill:#f59e0b,stroke:#f59e0b,stroke-width:2px,color:#000
                        </pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB: Integracoes -->
        <div id="view-integracoes" class="hidden p-6">
            <div class="max-w-[1600px] mx-auto">
                <div class="mb-6 text-center">
                    <h2 class="font-display text-2xl font-bold mb-2">4 - Arquitetura de Integracoes</h2>
                    <p class="text-orbi-textSec">Como os sistemas se conectam por tras</p>
                </div>
                <div class="section-card rounded-2xl p-6 diagram-container" style="max-height: 70vh;">
                    <div class="diagram-wrapper" id="wrapper-integracoes">
                        <pre class="mermaid">
flowchart LR
    subgraph PACIENTE [PACIENTE]
        P1[WhatsApp do Paciente]
    end

    subgraph WHATSAPP [WHATSAPP BUSINESS API]
        W1[Meta Cloud API - DEFINIDO]
        W2[Recebe mensagens]
        W3[Envia respostas]
    end

    subgraph AGENTE [AGENTE EVA]
        E1[Motor de IA]
        E2[Regras de Negocio]
        E3[Roteamento]
        E4[Follow-up]
    end

    subgraph CLINICORP [CLINICORP]
        C1[Consulta Agenda - DEFINIDO]
        C2[Cria Agendamento - DEFINIDO]
        C3[Atualiza Status - DEFINIDO]
        C4[Remarcacao - PENDENTE]
    end

    subgraph CLINIA [CRM CLINIA]
        CL1[Cadastro de Lead - PENDENTE]
        CL2[Status do Funil - PENDENTE]
        CL3[Historico - PENDENTE]
    end

    subgraph CONTEUDO [CONTEUDO]
        CO1[Google Maps - PENDENTE]
        CO2[Google Reviews - PENDENTE]
        CO3[Enderecos - PENDENTE]
    end

    subgraph HUB [HUB ORBI]
        H1[Logs e Registro - DEFINIDO]
        H2[Analytics - DEFINIDO]
    end

    P1 --> W1
    W1 --> W2
    W3 --> W1
    W1 --> P1
    
    W2 --> E1
    E1 --> E2
    E2 --> E3
    E3 --> E4
    E1 --> W3
    
    E2 --> C1
    E2 --> C2
    E2 --> C3
    E2 -.-> C4
    
    E2 -.-> CL1
    E2 -.-> CL2
    E2 -.-> CL3
    
    E2 -.-> CO1
    E2 -.-> CO2
    E2 -.-> CO3
    
    E1 --> H1
    E1 --> H2

    style P1 fill:#1e293b,stroke:#10b981,stroke-width:2px,color:#fff
    style W1 fill:#25D366,stroke:#25D366,stroke-width:2px,color:#fff
    style W2 fill:#1e293b,stroke:#25D366,stroke-width:2px,color:#fff
    style W3 fill:#1e293b,stroke:#25D366,stroke-width:2px,color:#fff
    style E1 fill:#DC0073,stroke:#DC0073,stroke-width:2px,color:#fff
    style E2 fill:#1e293b,stroke:#DC0073,stroke-width:2px,color:#fff
    style E3 fill:#1e293b,stroke:#DC0073,stroke-width:2px,color:#fff
    style E4 fill:#1e293b,stroke:#DC0073,stroke-width:2px,color:#fff
    style C1 fill:#1e293b,stroke:#10b981,stroke-width:2px,color:#fff
    style C2 fill:#1e293b,stroke:#10b981,stroke-width:2px,color:#fff
    style C3 fill:#1e293b,stroke:#10b981,stroke-width:2px,color:#fff
    style C4 fill:#1e293b,stroke:#f59e0b,stroke-width:3px,color:#fff
    style CL1 fill:#1e293b,stroke:#f59e0b,stroke-width:3px,color:#fff
    style CL2 fill:#1e293b,stroke:#f59e0b,stroke-width:3px,color:#fff
    style CL3 fill:#1e293b,stroke:#f59e0b,stroke-width:3px,color:#fff
    style CO1 fill:#1e293b,stroke:#f59e0b,stroke-width:3px,color:#fff
    style CO2 fill:#1e293b,stroke:#f59e0b,stroke-width:3px,color:#fff
    style CO3 fill:#1e293b,stroke:#f59e0b,stroke-width:3px,color:#fff
    style H1 fill:#1e293b,stroke:#10b981,stroke-width:2px,color:#fff
    style H2 fill:#1e293b,stroke:#10b981,stroke-width:2px,color:#fff
                        </pre>
                    </div>
                </div>
                
                <!-- Status Cards -->
                <div class="grid md:grid-cols-4 gap-4 mt-6">
                    <div class="section-card rounded-xl p-4">
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-10 h-10 rounded-lg bg-[#25D366] flex items-center justify-center text-xl font-bold">W</div>
                            <div>
                                <h4 class="font-bold">WhatsApp</h4>
                                <span class="text-xs text-emerald-400">CONFIGURADO</span>
                            </div>
                        </div>
                        <p class="text-xs text-orbi-textSec">Numero de teste: Orbi | Numero oficial: go-live</p>
                    </div>
                    <div class="section-card rounded-xl p-4">
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-10 h-10 rounded-lg bg-blue-500 flex items-center justify-center text-xl font-bold">C</div>
                            <div>
                                <h4 class="font-bold">Clinicorp</h4>
                                <span class="text-xs text-emerald-400">INTEGRADO</span>
                            </div>
                        </div>
                        <p class="text-xs text-orbi-textSec">Agenda + Agendamento OK | Remarcacao: definir regras</p>
                    </div>
                    <div class="section-card rounded-xl p-4">
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-10 h-10 rounded-lg bg-violet-500 flex items-center justify-center text-xl font-bold">CL</div>
                            <div>
                                <h4 class="font-bold">CRM Clinia</h4>
                                <span class="text-xs text-amber-400">PENDENTE</span>
                            </div>
                        </div>
                        <p class="text-xs text-orbi-textSec">Integracao automatica ou manual? Fonte oficial do funil?</p>
                    </div>
                    <div class="section-card rounded-xl p-4">
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-10 h-10 rounded-lg bg-rose-500 flex items-center justify-center text-xl font-bold">CT</div>
                            <div>
                                <h4 class="font-bold">Conteudo</h4>
                                <span class="text-xs text-amber-400">PENDENTE</span>
                            </div>
                        </div>
                        <p class="text-xs text-orbi-textSec">Links Maps, Reviews, enderecos - aguardando cliente</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB: Pendencias -->
        <div id="view-pendencias" class="hidden p-6">
            <div class="max-w-4xl mx-auto">
                <div class="mb-6 text-center">
                    <h2 class="font-display text-2xl font-bold mb-2">Checklist de Pendencias</h2>
                    <p class="text-orbi-textSec">Itens que precisamos do cliente para finalizar o MVP</p>
                </div>
                
                <div class="space-y-4">
                    <!-- Conteudo/RAG -->
                    <div class="section-card rounded-xl p-5 hover:border-orbi-accent transition-colors">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 rounded-xl bg-amber-500/20 flex items-center justify-center text-2xl shrink-0">1</div>
                            <div class="flex-1">
                                <h3 class="font-bold text-lg mb-3 flex items-center gap-2">Conteudo / RAG <span class="text-xs bg-amber-500 text-black px-2 py-0.5 rounded-full">4 itens</span></h3>
                                <ul class="space-y-2 text-sm">
                                    <li class="flex items-center gap-2 text-orbi-textSec"><span class="w-5 h-5 rounded border-2 border-amber-500"></span> Lista das 5 unidades + enderecos completos</li>
                                    <li class="flex items-center gap-2 text-orbi-textSec"><span class="w-5 h-5 rounded border-2 border-amber-500"></span> Links oficiais do Google Maps por unidade</li>
                                    <li class="flex items-center gap-2 text-orbi-textSec"><span class="w-5 h-5 rounded border-2 border-amber-500"></span> Links oficiais do Google Reviews</li>
                                    <li class="flex items-center gap-2 text-orbi-textSec"><span class="w-5 h-5 rounded border-2 border-amber-500"></span> Padrao do como chegar por unidade</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Regras Operacionais -->
                    <div class="section-card rounded-xl p-5 hover:border-orbi-accent transition-colors">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 rounded-xl bg-violet-500/20 flex items-center justify-center text-2xl shrink-0">2</div>
                            <div class="flex-1">
                                <h3 class="font-bold text-lg mb-3 flex items-center gap-2">Regras Operacionais <span class="text-xs bg-violet-500 text-white px-2 py-0.5 rounded-full">6 itens</span></h3>
                                <ul class="space-y-2 text-sm">
                                    <li class="flex items-center gap-2 text-orbi-textSec"><span class="w-5 h-5 rounded border-2 border-violet-500"></span> Excecoes de agenda: sem vaga hoje/amanha?</li>
                                    <li class="flex items-center gap-2 text-orbi-textSec"><span class="w-5 h-5 rounded border-2 border-violet-500"></span> Horarios bloqueados ou prioridades</li>
                                    <li class="flex items-center gap-2 text-orbi-textSec"><span class="w-5 h-5 rounded border-2 border-violet-500"></span> Politica de remarcacao: janela minima</li>
                                    <li class="flex items-center gap-2 text-orbi-textSec"><span class="w-5 h-5 rounded border-2 border-violet-500"></span> Politica de cancelamento</li>
                                    <li class="flex items-center gap-2 text-orbi-textSec"><span class="w-5 h-5 rounded border-2 border-violet-500"></span> Eva pode remarcar direto no Clinicorp?</li>
                                    <li class="flex items-center gap-2 text-orbi-textSec"><span class="w-5 h-5 rounded border-2 border-violet-500"></span> FUP: quantidade, intervalos e regras</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Handoff Humano -->
                    <div class="section-card rounded-xl p-5 hover:border-orbi-accent transition-colors">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 rounded-xl bg-rose-500/20 flex items-center justify-center text-2xl shrink-0">3</div>
                            <div class="flex-1">
                                <h3 class="font-bold text-lg mb-3 flex items-center gap-2">Handoff Humano <span class="text-xs bg-rose-500 text-white px-2 py-0.5 rounded-full">4 itens</span></h3>
                                <ul class="space-y-2 text-sm">
                                    <li class="flex items-center gap-2 text-orbi-textSec"><span class="w-5 h-5 rounded border-2 border-rose-500"></span> Lista oficial de gatilhos para handoff</li>
                                    <li class="flex items-center gap-2 text-orbi-textSec"><span class="w-5 h-5 rounded border-2 border-rose-500"></span> Canal/time de destino</li>
                                    <li class="flex items-center gap-2 text-orbi-textSec"><span class="w-5 h-5 rounded border-2 border-rose-500"></span> Horario de atendimento do time humano</li>
                                    <li class="flex items-center gap-2 text-orbi-textSec"><span class="w-5 h-5 rounded border-2 border-rose-500"></span> SLA: tempo maximo para humano assumir</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- CRM Clinia -->
                    <div class="section-card rounded-xl p-5 hover:border-orbi-accent transition-colors">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 rounded-xl bg-blue-500/20 flex items-center justify-center text-2xl shrink-0">4</div>
                            <div class="flex-1">
                                <h3 class="font-bold text-lg mb-3 flex items-center gap-2">CRM Clinia <span class="text-xs bg-blue-500 text-white px-2 py-0.5 rounded-full">2 itens</span></h3>
                                <ul class="space-y-2 text-sm">
                                    <li class="flex items-center gap-2 text-orbi-textSec"><span class="w-5 h-5 rounded border-2 border-blue-500"></span> Tera integracao automatica ou registro manual?</li>
                                    <li class="flex items-center gap-2 text-orbi-textSec"><span class="w-5 h-5 rounded border-2 border-blue-500"></span> Qual sera a fonte oficial do funil?</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-orbi-card/50 border-t border-white/5 py-4">
        <div class="max-w-[1800px] mx-auto px-6 flex justify-between items-center text-xs text-orbi-textSec">
            <div>SorriaMed x Orbi | Agente Eva MVP v0.1</div>
            <div class="flex items-center gap-4">
                <span>SLA IA: 15s</span>
                <span>|</span>
                <span>Atendimento: 24/7</span>
            </div>
        </div>
    </footer>

    <script>
        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'dark',
            themeVariables: {
                darkMode: true,
                background: 'transparent',
                primaryColor: '#1e293b',
                primaryTextColor: '#f8fafc',
                primaryBorderColor: '#10b981',
                lineColor: '#64748b',
                secondaryColor: '#0f172a',
                tertiaryColor: '#DC0073',
                mainBkg: '#1e293b',
                nodeBorder: '#10b981',
                clusterBkg: '#0f172a',
                clusterBorder: '#334155',
                titleColor: '#f8fafc',
                edgeLabelBackground: '#1e293b',
                nodeTextColor: '#f8fafc'
            },
            flowchart: {
                htmlLabels: true,
                curve: 'basis',
                nodeSpacing: 50,
                rankSpacing: 70,
                padding: 15,
                useMaxWidth: false
            },
            securityLevel: 'loose'
        });

        // Zoom
        let currentZoom = 1;
        function zoomIn() {
            currentZoom = Math.min(currentZoom + 0.15, 2.5);
            applyZoom();
        }
        function zoomOut() {
            currentZoom = Math.max(currentZoom - 0.15, 0.4);
            applyZoom();
        }
        function resetZoom() {
            currentZoom = 1;
            applyZoom();
        }
        function applyZoom() {
            document.querySelectorAll('.diagram-wrapper').forEach(w => {
                w.style.transform = 'scale(' + currentZoom + ')';
            });
            document.getElementById('zoom-level').textContent = Math.round(currentZoom * 100) + '%';
        }

        // Tabs
        function switchTab(tab) {
            document.querySelectorAll('[id^="view-"]').forEach(v => v.classList.add('hidden'));
            document.querySelectorAll('[id^="tab-"]').forEach(t => {
                t.classList.remove('tab-active');
                t.classList.add('bg-orbi-card', 'hover:bg-white/10');
            });
            document.getElementById('view-' + tab).classList.remove('hidden');
            var activeTab = document.getElementById('tab-' + tab);
            activeTab.classList.add('tab-active');
            activeTab.classList.remove('bg-orbi-card', 'hover:bg-white/10');
        }

        // Drag to pan
        document.querySelectorAll('.diagram-container').forEach(function(container) {
            var isDown = false;
            var startX, startY, scrollLeft, scrollTop;
            container.addEventListener('mousedown', function(e) {
                isDown = true;
                container.style.cursor = 'grabbing';
                startX = e.pageX - container.offsetLeft;
                startY = e.pageY - container.offsetTop;
                scrollLeft = container.scrollLeft;
                scrollTop = container.scrollTop;
            });
            container.addEventListener('mouseleave', function() {
                isDown = false;
                container.style.cursor = 'grab';
            });
            container.addEventListener('mouseup', function() {
                isDown = false;
                container.style.cursor = 'grab';
            });
            container.addEventListener('mousemove', function(e) {
                if (!isDown) return;
                e.preventDefault();
                var x = e.pageX - container.offsetLeft;
                var y = e.pageY - container.offsetTop;
                container.scrollLeft = scrollLeft - (x - startX);
                container.scrollTop = scrollTop - (y - startY);
            });
        });

        // Keyboard
        document.addEventListener('keydown', function(e) {
            if (e.key === '+' || e.key === '=') zoomIn();
            if (e.key === '-') zoomOut();
            if (e.key === '0') resetZoom();
        });
    </script>
</body>
</html>
